[tools]
go = "latest"

[tasks.fmt]
description = "Format Go source files"
run = "gofmt -w src/*.go"

[tasks.test]
description = "Run all tests"
run = "go test ./..."

[tasks.bench]
description = "Run benchmark suite"
run = "go test ./src -bench . -benchmem"

[tasks.build]
description = "Build local snav binary"
run = "go build -buildvcs=false -o snav ./src"

[tasks.build-macos-arm64]
description = "Build macOS arm64 snav binary"
run = "GOOS=darwin GOARCH=arm64 go build -buildvcs=false -o snav ./src"

[tasks.link]
description = "Build macOS arm64 binary and install to /usr/local/bin"
depends = ["build-macos-arm64"]
run = "install -m 0755 snav /usr/local/bin/snav"

[tasks.dev]
description = "Run snav via go run"
raw = true
run = "go run ./src"

[tasks.cli]
description = "Build and run local binary (interactive)"
depends = ["build"]
raw = true
run = "./snav"

[tasks.clean]
description = "Remove local build output"
run = "rm -f snav"
